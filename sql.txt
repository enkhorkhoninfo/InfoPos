-- 2013.07.05
ALTER TABLE AUTONUM ADD (CODE  VARCHAR2(20));
ALTER TABLE AUTONUM ADD (NOTE  NVARCHAR2(100));
CREATE UNIQUE INDEX AUTONUM_IDX ON AUTONUM (ID, CODE);

ALTER TABLE AUTONUMVALUE ADD (CODE  VARCHAR2(20));
CREATE UNIQUE INDEX AUTONUMVALUE_IDX ON AUTONUMVALUE (ID, CODE, KEY);

insert into generalparam(key, Typecode, name, itemvalue, description, itemtype, itemlen, mask, orderno) values('ImplementYear',10,'Анх нэвтрүүлсэн он','2008','Анх нэвтрүүлэсэн он','0', '0', '', '29');

-- 20130714

ALTER TABLE CUSTOMERTYPE  ADD (Accountno  VARCHAR2(20));

ALTER TABLE CUSTOMERTYPE  ADD (IncomeAccountno  VARCHAR2(20));


ALTER TABLE CUSTOMER  ADD (Accountno  VARCHAR2(20));

ALTER TABLE CUSTOMER  ADD (IncomeAccountno  VARCHAR2(20));

ALTER TABLE CUSTOMERTYPE DROP COLUMN RECVACNTNO;

--20130718

ALTER TABLE CUSTOMER RENAME COLUMN RATECODE TO levelno;

ALTER TABLE CUSTOMER RENAME COLUMN MEMBERCONTRACTNO TO CONTRACTNO;

ALTER TABLE CUSTOMER DROP COLUMN DIRFIRSTNAME;

ALTER TABLE CUSTOMER DROP COLUMN DIRLASTNAME;

ALTER TABLE CUSTOMER DROP COLUMN DIRMIDDLENAME;

ALTER TABLE CUSTOMER DROP COLUMN DIRREGISTERNO;

ALTER TABLE CUSTOMER DROP COLUMN DIRPASSNO;

ALTER TABLE CUSTOMER DROP COLUMN DIRSEX;

ALTER TABLE CUSTOMER DROP COLUMN DIRBIRTHDAY;

ALTER TABLE CUSTOMER DROP COLUMN ISOTHERINSURANCE;

ALTER TABLE CUSTOMER DROP COLUMN ISHINSURANCE;

ALTER TABLE CUSTOMER DROP COLUMN ISSINSURANCE;

ALTER TABLE CUSTOMER DROP COLUMN MEMBERTYPE;


--20130720

ALTER TABLE CUSTOMER DROP COLUMN HEIGHT;

ALTER TABLE CUSTOMER DROP COLUMN FOOT;

--20130729


ALTER TABLE PADAYTYPE RENAME COLUMN DESCRIPTION TO name;

ALTER TABLE PADAYTYPE  ADD (name2  NVARCHAR2(100));

ALTER TABLE PADAYTYPE  ADD (isdefault  NUMBER(1)                        DEFAULT 0);

ALTER TABLE PADAYTYPE  ADD (Description  NVARCHAR2(1000));

ALTER TABLE PADAYTYPE ADD (orderno  NUMBER(4)                            DEFAULT 0);

ALTER TABLE PAWEATHER
RENAME COLUMN DESCRIPTION TO name;

ALTER TABLE PAWEATHER
 ADD (name2  NVARCHAR2(200));

ALTER TABLE PAWEATHER
 ADD (description  NVARCHAR2(1000));

ALTER TABLE PAWEATHER
 ADD (orderno  NUMBER(4));

ALTER TABLE PACALENDAR
RENAME COLUMN DAYWEATHERTYPE TO DAYWEATHERid;

ALTER TABLE PACALENDAR
RENAME COLUMN NIGHTWEATHERTYPE TO NIGHTWEATHERid;

ALTER TABLE PATAGSETUP
 ADD (name2  NVARCHAR2(200));

ALTER TABLE PATAGSETUP
 ADD (orderno  NUMBER(5)                            DEFAULT 1);


ALTER TABLE PAINVTYPE
RENAME COLUMN CLASSCODE TO catcode;

ALTER TABLE PASERVTYPE
 ADD (catcode  NUMBER(5));

Insert into DICTIONARY(ID, NAME,DESCRIPTION, SQL, REFRESHINTERVAL, FIELDNAMES,UPDATETABLE) VALUES('SERVCAT', 'Үйлчилгээний ангиллын бүртгэл',  '', 'select catcode, name from paservcat order by orderno', '120', 'catcode, name', 'paservcat');


create table PaServCat (
 CatCode  Varchar2(4) ,
 Name  nVarchar2(50) ,
 Name2  nVarchar2(50) ,
 OrderNo  number(5) ,
PRIMARY KEY (CatCode)
);


ALTER TABLE INVMAIN
RENAME COLUMN INVTYPE TO typecode;

ALTER TABLE INVMAIN
RENAME COLUMN PRICEAMOUNT TO PRICE;

ALTER TABLE INVMAIN
MODIFY(RENTFLAG  DEFAULT 0);

ALTER TABLE INVMAIN
 ADD (salesstartdate  DATE);

ALTER TABLE INVMAIN
 ADD (salesenddate  DATE);

ALTER TABLE INVMAIN
 ADD (prepared  NUMBER(1)                           DEFAULT 0);

ALTER TABLE INVMAIN DROP COLUMN CATCODE;

ALTER TABLE INVMAIN DROP COLUMN PRINTERTYPE;


drop table InvSeries;

create table InvSeries (
 ItemNo  Varchar2(20) ,
 BarCode  Varchar2(20) ,
 InvID  Varchar2(20) ,
 Status  number(2) ,
 LastPrepareUserNo  number(5) ,
 LastPrepareDate  date,
 Note  nVarchar2(200) ,
PRIMARY KEY (itemno)
);

drop table ProdPrice;

create table ProdPrice (
 ProdType  Number(2) ,
 ProdId  Varchar2(20) ,
 PriceTypeID  Varchar2(20) ,
 Price  Number(18,2) ,
PRIMARY KEY (ProdType, ProdId, PriceTypeID)
);

create table PAPriceType (
 PriceTypeID  Varchar2(20) ,
 Name  nVarchar2(50) ,
 Name2  nVarchar2(50) ,
 DayType  Varchar2(4) ,
 StartTime  Date ,
 EndTime  Date ,
 OrderNo  Number(4) ,
PRIMARY KEY (PriceTypeID)
);



ALTER TABLE SERVMAIN
RENAME COLUMN SERVTYPE TO TYPECode;

ALTER TABLE SERVMAIN
RENAME COLUMN SERVSTARTDATE TO salesSTARTDATE;

ALTER TABLE SERVMAIN
RENAME COLUMN SERVENDDATE TO salesENDDATE;

ALTER TABLE SERVMAIN
RENAME COLUMN PRICEAMOUNT TO PRICE;

ALTER TABLE SERVMAIN
RENAME COLUMN ISSCHEDULE TO IStimetable;

ALTER TABLE SERVMAIN
RENAME COLUMN SCHEDULETYPE TO timetableid;

ALTER TABLE SERVMAIN DROP COLUMN CATCODE;

ALTER TABLE SERVMAIN DROP COLUMN PRINTERTYPE;

ALTER TABLE SERVMAIN
 ADD (brandid  NVARCHAR2(20));

ALTER TABLE SERVMAIN
 ADD (barcode  NVARCHAR2(20));














